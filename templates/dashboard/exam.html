{% extends "dashboard/common/base.html" %}

{% block pagecontent %}

{% include "dashboard/courses-list.html" with course=exam.course %}

<div class="twelve wide column" id="main">
	<h1 class="ui dividing header">
		<div class="content">
			Edit Exam
		</div>
	</h1>
	<div class="row">
		<div class="ui small buttons">
			<div class="ui button"><i class="privacy icon"></i> Generate Token</div>
			<div class="ui button"><i class="share icon"></i> Export</div>
			<div class="ui button"><i class="print icon"></i> Print</div>
		</div>
		<div class="column right floated">
			<div class="ui small buttons">
				<div class="ui red button"><i class="delete icon"></i> Delete Exam</div>
			</div>
		</div>
	</div>
	<br>

	<form class="ui form">
        <input type="hidden" name="exam_id" value="{{ exam.id }}" />

		<div class="two fields">
			<div class="field">
				<label>Exam Name</label>
				<input value="{{ exam.name }}" type="text" name="first-name" placeholder="Exam Name">
			</div>
			<div class="field">
				<label>Course</label>
				<select class="ui dropdown">
					{% for course in teacher.courses.all %}
					<option value="{{ course.id }}">{{ course.name }}</option>
					{% endfor %}
				</select>
			</div>
		</div>
	</form>

	<div class="ui hidden divider"></div>
	<div class="ui top attached fluid two item tabular menu">
		<a class="active item" data-tab="tab_edit">Edit</a>
		<a class="item" data-tab="tab_preview">Preview</a>
	</div>

	<div class="ui bottom attached active tab segment" data-tab="tab_edit">
		<div class="ui divided items" data-role="questionContainer">

			{% for question in exam.question_set.all %}
			<div class="item" data-role="question">
				<input type="hidden" value="">
				<div class="content">
					<div class="header">Question {{ forloop.counter }}</div>
					<div class="meta">

						<div class="ui padded stackable grid">
							<div class="three wide column">
								<span class="type">{{ question.category }}</span>
								<br>
								<span class="options"></span>
							</div>
							<div class="ten wide column">
								<span class="prompt">{{ question.text }}</span>
							</div>
							<div class="two wide column center aligned">
								<div class="ui mini green icon button" data-content="Edit"><i class="pencil icon"></i></div>
								<div class="ui mini red icon button" data-role="delete" data-action="{{ question.id }}" data-content="Delete">
									{% csrf_token %}
									<i class="delete icon"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>

		<div class="ui hidden divider"></div>
		<div class="ui fluid huge button" data-role="newQuestion"><i class="plus icon"></i> Add Question</div>
	</div>
	<div class="ui bottom attached tab segment" data-tab="tab_preview">

	</div>
</div>

<div class="ui form raised secondary segment" id="newquestionform" style="display:none">
    {% csrf_token %}
	<a style="float:right; color:rgba(0, 0, 0, 0.8) !important" data-role='close' data-content="Cancel"><i class="delete icon"></i></a>
	<h3 class="ui left floated header">New Question</h3>

	<div class="field">
		<label for="prompt">Prompt:</label>
		<input type="text" name="prompt" placeholder="What is the..."> 
	</div>

	<div class="ui tiny header">Question Type:</div>
	<div class="field">
		<select class="ui dropdown" name="type" data-role="questionType">
			<option value="">Select a question type!</option>
			<option value="multichoice">Multiple Choice</option>
			<option value="truefalse">True / False</option>
			<option value="shortanswer">Short Answer</option>
			<option value="essay">Essay</option>
		</select>
	</div>

	<div class="ui segment">
		<div class="field">
			<label>Options:</label>
		</div>

		<div class="field">
			<!-- Multiple Choice -->
			<div class="ui hidden multichoice options">
				<form class="ui form" name="multichoice">
					<div class="three fields">
						<div class="one wide field" style="line-height: 3rem">
							<div class="ui radio checkbox">
								<input type="radio" name="option" checked="checked">
								<label for="option"></label>
							</div>
						</div>
						<div class="six wide field">
							<div class="ui icon input">
								<input type="text" name="choice" placeholder="New Option...">
							</div>
						</div>
					</div>

					<div class="three fields">
						<div class="one wide field" style="line-height: 3rem">
							<div class="ui radio checkbox">
								<input type="radio" name="option">
								<label for="option"></label>
							</div>
						</div>
						<div class="six wide field">
							<div class="ui input">
								<input type="text" name="choice" placeholder="New Option...">
							</div>
						</div>
					</div>
					<div class="ui blue icon button" data-role="add-multichoice-choice" data-content="New option"><i class="plus icon"></i></div>
				</form>
			</div>

			<!-- True / False-->
			<div class="ui hidden truefalse options">
				<div class="field">
					<span data-role="setFalse" style="cursor:pointer">False</span>
					<div class="ui toggle fitted checkbox" style="margin:0 1em">
						<input type="checkbox" name="public">
					</div>
					<span data-role="setTrue" style="cursor:pointer">True</span>
				</div>
			</div>

			<!-- Short Answer -->
			<div class="ui hidden shortanswer options">
				<div class="field">
					<h2 class="ui faded centered text header">No options available</h2>						
				</div>
				<br>
			</div>

			<!-- Essay -->
			<div class="ui hidden essay options">
				<div class="field">
					<h2 class="ui faded centered text header">No options available</h2>						
				</div>
				<br>
			</div>
		</div>

	</div>
	<br>
	<div class="two fields">                                
		<div class="ui right floated button" data-role="close">Cancel</div>
		<div class="ui blue button" data-role="save">Save Question</div>
	</div>

	<div class="ui inverted dimmer">
		<h2 class="ui icon header" style="position:absolute; top:25%; left:0; right:0">
			<i class="green checkmark icon"></i>
			Question Saved!
		</h2>
	</div>
</div>


<div class="three fields multichoiceTemplate" style="display:none">
	<div class="one wide field" style="line-height: 3rem">
		<div class="ui radio checkbox">
			<input type="radio" name="option">
			<label for="option"></label>
		</div>
	</div>
	<div class="six wide field">
		<div class="ui input">
			<input type="text" name="choice" placeholder="New Option...">
		</div>
	</div>
	<div class="one wide field">
		<div class="ui small red icon button" data-role="deleteOption"><i class="delete icon"></i></div>
	</div>
</div>

<div class="item questionSummary" style="display:none">
	<input type="hidden">
	<div class="content">
		<div class="header">Question</div>
		<div class="meta">
			<div class="ui padded stackable grid">
				<div class="three wide column">
					<span class="type"></span>
					<br>
					<span class="options"></span>
				</div>
				<div class="ten wide column">
					<span class="prompt"></span>
				</div>
				<div class="two wide column center aligned">
					<div class="ui mini basic icon button" data-role="edit" data-content="Edit"><i class="pencil icon"></i></div>
					<div class="ui mini basic icon button" data-role="delete" data-content="Delete"><i class="delete icon"></i></div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}

{% block javascript %}

{% load static %}
<script src="{% static 'js/jquery.cookie.js' %}"></script>
<script src="{% static 'js/add-course.js' %}"></script>
<script src="{% static 'js/new-exam.js' %}"></script>
<script src="{% static 'js/exam.js' %}"></script>
{% endblock %}
